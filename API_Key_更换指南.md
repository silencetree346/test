# NewsAPI Key 更换指南

## 🔍 问题确认

如果您的网站 https://silencetree346.github.io/test/ 无法获取资讯，很可能是 NewsAPI 配额用完了。

### 检查方法

**方法1：直接测试 API**

在浏览器中访问这个链接：
```
https://newsapi.org/v2/everything?q=coffee&apiKey=4c9f94c044b44f9daf5ea2d4de8e1e39
```

如果看到类似这样的错误：
```json
{
  "status": "error",
  "code": "rateLimited",
  "message": "You have made too many requests recently..."
}
```
说明配额用完了，需要更换 API Key。

**方法2：查看浏览器控制台**

1. 访问您的网站
2. 按 F12 打开开发者工具
3. 点击 Console 标签
4. 查找红色错误信息

常见错误：
- `429 Too Many Requests` = 配额用完
- `401 Unauthorized` = API Key 无效
- `426 Upgrade Required` = 协议错误（不应该出现在 HTTPS）

---

## ✅ 解决方案：注册新的 API Key

### 步骤1：注册 NewsAPI 账号

1. **访问注册页面**
   ```
   https://newsapi.org/register
   ```

2. **填写注册信息**
   - First Name: 您的名字
   - Email: 邮箱地址（使用新邮箱）
   - Password: 密码

3. **点击 Submit**

4. **查收邮件验证**（可能需要）

### 步骤2：获取 API Key

1. 注册成功后，页面会显示您的 API Key
2. 格式类似：`a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`
3. **复制这个 Key**（重要！）

### 步骤3：替换代码中的 API Key

**告诉我您的新 API Key，我会帮您替换！**

或者您也可以自己替换：

1. 打开文件：`/Users/luckincoffee/test/docs/index.html`
2. 搜索（Cmd+F）：`4c9f94c044b44f9daf5ea2d4de8e1e39`
3. 替换为您的新 API Key
4. 保存文件

### 步骤4：推送更新到 GitHub

1. 打开 GitHub Desktop
2. 查看更改（应该看到 `docs/index.html` 被修改）
3. 提交信息：`更新 NewsAPI Key`
4. 点击 `Commit to main`
5. 点击 `Push origin`
6. 等待 1-2 分钟让 GitHub Pages 重新部署

### 步骤5：测试

1. 清除浏览器缓存（Cmd+Shift+R 强制刷新）
2. 访问 https://silencetree346.github.io/test/
3. 页面会自动加载资讯
4. 如果还是不行，按 F12 查看控制台错误

---

## 🆕 已优化功能

我刚刚为您优化了两个功能：

### 1️⃣ 自动加载资讯

**之前**：需要手动点击"获取最新资讯"按钮
**现在**：页面加载完成后自动获取资讯 ✨

### 2️⃣ 更友好的错误提示

**之前**：简单的错误信息
**现在**：
- 详细说明可能的原因
- 提供解决方案
- 包含 NewsAPI 注册链接

---

## 💡 NewsAPI 限制说明

### 免费版限制

- ✅ 每天 **100 次请求**
- ✅ 最多获取 **100 条新闻**
- ✅ 只能查询**最近1个月**的新闻
- ❌ 不能用于商业用途
- ❌ 有时延（最多15分钟）

### 如何节省配额

1. **减少刷新次数**：不要频繁刷新页面
2. **使用缓存**：浏览器会缓存部分数据
3. **多账号轮换**：注册多个账号，轮流使用

### 付费版选项

如果需要更多请求：
- **Developer Plan**: $449/月，每月 250,000 次请求
- **Business Plan**: $999/月，每月 1,000,000 次请求

访问：https://newsapi.org/pricing

---

## 🔄 API Key 更换流程图

```
┌─────────────────────────────────────────┐
│ 1. 访问 newsapi.org/register            │
│    注册新账号（使用新邮箱）              │
└──────────────┬──────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────┐
│ 2. 获取新的 API Key                      │
│    复制 32 位字符串                       │
└──────────────┬──────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────┐
│ 3. 告诉开发者新 Key，或自己替换：        │
│    docs/index.html 第 808 行             │
│    const apiKey = '新Key';              │
└──────────────┬──────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────┐
│ 4. GitHub Desktop 提交并推送             │
│    Commit → Push origin                  │
└──────────────┬──────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────┐
│ 5. 等待 1-2 分钟 GitHub Pages 部署      │
│    强制刷新页面（Cmd+Shift+R）           │
└──────────────┬──────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────┐
│ 6. ✅ 成功！自动加载咖啡行业资讯        │
└─────────────────────────────────────────┘
```

---

## 📞 需要帮助？

### 快速联系方式

**如果您获取了新的 API Key：**

只需告诉我新的 Key，格式如下：
```
我的新 API Key 是：a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
```

我会立即帮您：
1. 替换代码中的 API Key
2. 确认修改无误
3. 指导您推送到 GitHub

### 常见问题

**Q: 注册时没收到验证邮件？**
A: 检查垃圾邮件文件夹，或使用其他邮箱重新注册

**Q: 推送后还是不行？**
A: 
1. 等待 2-3 分钟让部署完成
2. 清除浏览器缓存（Cmd+Shift+R）
3. 检查控制台是否还有错误

**Q: 想用其他新闻 API？**
A: 可以考虑：
- GNews API (https://gnews.io/)
- Currents API (https://currentsapi.services/)
- MediaStack API (https://mediastack.com/)

---

## ✅ 成功标志

更换 API Key 成功后，您应该看到：

1. **页面加载后自动显示资讯**
2. **看到公司动态、行业趋势、市场变化三个分类**
3. **看到具体的新闻标题和来源**
4. **控制台显示**：`✅ NewsAPI：成功获取 XX 条咖啡行业资讯`

---

**准备好了吗？去注册新的 API Key，然后告诉我，我帮您完成后续步骤！** 🚀


